

%----------------------------------------------------------------------------
% ÍNDICE PERSONALIZADO
%----------------------------------------------------------------------------

\addto\captionsspanish{\renewcommand{\contentsname}{Índice general}}

\newlength{\fraseancho}
\newcommand{\hLinefill}[1]{\rule[0.5ex]{#1}{0.4pt}}

% Lo que se ejecutará al LEER el .toc
\DeclareRobustCommand{\TOCNewPart}[1]{%
  \par\begingroup
    \parindent=0pt
    \vspace{0.6\baselineskip}%
    \Large\bfseries
    \settowidth{\fraseancho}{#1}%
    \hLinefill{\dimexpr(0.95\linewidth-\fraseancho)/2\relax}%
    \hspace*{4mm}#1\hspace*{4mm}%
    \hLinefill{\dimexpr(0.95\linewidth-\fraseancho)/2\relax}%
    \par\vspace{0.3\baselineskip}%
  \endgroup
}

% Escribimos la llamada al macro anterior dentro del .toc
\newcommand{\NewPart}[1]{%
  \addtocontents{toc}{\protect\TOCNewPart{#1}}%
}
