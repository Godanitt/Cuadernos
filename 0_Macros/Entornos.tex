% Macro De Ejemplo

\RequirePackage[most]{tcolorbox}
\tcbuselibrary{skins}

\newcounter{Teorema}[chapter]
\newcounter{Definicion}[chapter]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ejercicio

\newcounter{exercise}[chapter]
\renewcommand{\theexercise}{\thechapter.\arabic{exercise}}

% Entorno Ejercicio
\newenvironment{Ejercicio}[1]{%
  \refstepcounter{exercise}% <-- ancla de hyperref
  \begin{tcolorbox}[
  colback=Gray!40,
  colframe=Gray!40,
  sharp corners,
  boxrule=0pt,
  left=5pt,
  right=5pt,
  top=5pt,
  bottom=5pt,
  top=1.0em,          % margen superior interno (por encima del título y contenido)
  before title={\vspace{0.5em}}, % añade espacio encima del título
  %%
  title={\textcolor{black}{\bfseries Ejercicio~\theexercise\ --\ #1}}]}{%
  \end{tcolorbox}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ejemplo

\newcounter{example}[chapter]
\renewcommand{\theexample}{\thechapter.\arabic{example}}

% Entorno Ejemplo

\newenvironment{Ejemplo}[1]{%
  \refstepcounter{example}%
  \begin{tcolorbox}[
    enhanced,
    breakable,             % permite que el contenido se parta entre páginas
    colback=Gray!20,
    colframe=Gray!20,
    sharp corners,
    left=5pt,right=5pt,top=1em,bottom=5pt,
    borderline south={3pt}{-3pt}{Gray},
    borderline north={3pt}{-3pt}{Gray},
    before title={\vspace{0.5em}},
    title={\textcolor{black}{\bfseries Ejemplo~\theexample\ --\ #1}}
  ]%
}{%
  \end{tcolorbox}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Teorema


\newcounter{theorem}[chapter]
\renewcommand{\thetheorem}{\thechapter.\arabic{theorem}}

% Entorno Teorema

\newenvironment{Teorema}[1][]{%
  \refstepcounter{theorem}% <-- ancla de hyperref
  \begin{tcolorbox}[
  enhanced,         %
  colback=Gray!30,  %
  colframe=Gray!30, %
  sharp corners,    %
  left=5pt,         %
  right=5pt,        % 
  top=1.0em,        % margen superior interno (por encima del título y contenido)
  bottom=5pt,       %
  borderline west={3pt}{-3pt}{Black!60}, % ← franja a la izquierda
  before title={\vspace{0.5em}}, % añade espacio encima del título
  title={\textcolor{black}{\bfseries Teorema~\thetheorem}}, #1]%
}{%
  \end{tcolorbox}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definicion


\newcounter{definition}[chapter]
\renewcommand{\thedefinition}{\thechapter.\arabic{definition}}

% Entorno definicion

\newenvironment{Definicion}[1][]{%
  \refstepcounter{definition}% <-- ancla de hyperref
  \begin{tcolorbox}[
  enhanced,         %
  colback=Gray!20,  %
  colframe=Gray!20, %
  sharp corners,    %
  left=5pt,         %
  right=5pt,        % 
  top=1.0em,        % margen superior interno (por encima del título y contenido)
  bottom=5pt,       %
  borderline west={3pt}{-3pt}{Black!40}, % ← franja a la izquierda
  before title={\vspace{0.5em}}, % añade espacio encima del título
  title={\textcolor{black}{\bfseries Definición~\thedefinition}}, #1]%
}{%
  \end{tcolorbox}%
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Resalte


\newenvironment{Resalte}[1][]{%
  \begin{tcolorbox}[
  enhanced,         %
  colback=Gray!30,  %
  colframe=Gray!30, %
  sharp corners,    %
  left=5pt,         %
  right=5pt,        % 
  %left skip = 1cm,
  %rigth skip = 1 cm,
  leftright skip=1cm,
  top=1.0em,        % margen superior interno (por encima del título y contenido)
  bottom=5pt,       %
  ]
}{%
  \end{tcolorbox}%
}