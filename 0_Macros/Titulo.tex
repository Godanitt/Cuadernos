
% Define el campo de subtitle como variable
\newcommand{\subtitle}[1]{\gdef\@subtitle{#1}}

\usetikzlibrary{fadings}

% Macro para hacer el t√≠tulo
\newcommand{\MakeTitle}[4]{%
\begin{titlepage} 

      %-----------------------------
      % --- CASO 0: MODO FOTO ----
      %-----------------------------

      \ifcase #1

      \begin{tikzpicture}[remember picture, overlay,x=\paperwidth, y=-\paperheight]
     
      % Fondo de color (opcional)
      \fill[#2] (current page.south west) rectangle (current page.north east);
      
      \node[opacity=1]  at (0.5,0.1) {\includegraphics[width=1.2\paperwidth]{#4}};

      % Sombra para autores
      \shade [opacity=0.3]
          (0.0, 0.23) rectangle (1.5, 0.35);
      \fill [opacity=0.2]
          (0.0, 0.23) rectangle (1.5, 0.35);

      \node [anchor=south west,align=left] at (0.05,0.32) {\fontsize{22pt}{24pt}\selectfont\bfseries \color{white} \theauthor\par};

      % Sombra para Titulo
      \shade [opacity=0.1,color = #2]
          (0.0, 0.35) rectangle (1.5,1.2);
      \fill [opacity=0.4,color = #2!10]
          (0.0, 0.35) rectangle (1.5,1.2);


      \node[anchor=north west,align=left,text width=0.9\paperwidth] at (0.05,0.38) {
        {\fontsize{60pt}{70pt}\selectfont \bfseries\color{white} \thetitle\par}
        \vspace{1em} \\[1 em]

        {\LARGE\itshape\color{white} \@subtitle\par}
        \vspace{3em}
      };


      \node[anchor=south west,align=left,text width=0.9\paperwidth] at (0.05,0.82) {
        {\textcolor{#3}{\faGithub}}
      };

      % Lineas + Caja lado

      \fill [color=#2!50] (-0.2, 0.45) rectangle (-0.05, 0.36);

      
      \draw [ultra thick, opacity=0.8, color=white] (0.0,-1.5) -- (0.0,1.5);
      \draw [ultra thick, opacity=0.8, color=white] (-1.5,0.35) -- (1.5,0.35);
      
      \end{tikzpicture}

    
      
      %-----------------------------
      % --- CASO 2: MODO SIMPLE ----
      %-----------------------------

      \or 

      \begin{tikzpicture}[remember picture, overlay,x=\paperwidth, y=-\paperheight]
     
      
      % Fondo de color (opcional)
      \fill[#2] (current page.south west) rectangle (current page.north east);

      % Patron de color al fondo: 


      % Fondo (patron)

      % Sombra para autores
      \shade [ opacity=0.3, left color=#3, right color=#2]
          (0.0, 0.0) rectangle (1.5, 0.15);
      \node [anchor=north west,align=left] at (0.05,0.03) {\fontsize{22pt}{24pt}\selectfont\bfseries \color{white} \theauthor\par};

      % Sombra para Titulo
      \shade [opacity=0.4, left color=#3, right color=#2]
          (0.0, 0.15) rectangle (1.5,1.2);
          
      \fill [ opacity=0.3, color = #3]
          (-0.2, 0.15) rectangle (-0.01, 0.3);

      \node[anchor=north west,align=left,text width=0.9\paperwidth] at (0.05,0.18) {
        {\fontsize{56pt}{66pt}\selectfont \bfseries\color{white} \thetitle\par}
        \vspace{1em} \vspace*{2em}
        {\LARGE\itshape\color{white} \@subtitle\par}
        \vspace{3em}
      };

      % Ahora el simbolo del github
      \node[anchor=mid west,align=left,text width=0.9\paperwidth] at (0.05,0.84)  {
      {\begingroup
        \hypersetup{colorlinks=true, urlcolor=white}%
        \fontsize{32pt}{32pt}\selectfont \color{white} 
        {\href{https://github.com/Godanitt/Cuadernos}{\faGithub \ \  
        \begingroup
          \fontsize{24pt}{24pt}\selectfont %Godanitt
        \endgroup}}
      \endgroup}
      };
      \end{tikzpicture}
      
      %-----------------------------
      % --- CASO 3:            ----
      %-----------------------------

      \fi
      

    \null % Para evitar espacios verticales no deseados
    \thispagestyle{empty}
    \clearpage
  \end{titlepage}
}

% Para que \title y \author funcionen con \thetitle y \theauthor
\pretitle{\gdef\thetitle}
\preauthor{\gdef\theauthor}

